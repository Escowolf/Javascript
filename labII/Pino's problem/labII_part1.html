<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
        <meta name="description" content="Ambientes Desenvolvimento Software">
        <meta name="keywords" content="HTML, CSS, JavaScript">
		<meta name="author" content="Beatriz de Sousa Bottai">
        <meta name="author" content="Ezequiel Sousa Silva">
    <title>Nome - ABNT</title>

</head>

<body>
	<!--Crie uma função Javascript que receba um nome completo de uma pessoa, por exemplo, “Antonio Augusto Ribeiro Pedroza” e inverta para a notação ABNT “Pedroza, Antonio A R”. Crie e publique uma página Web que suporte a execução do script. Não use Alert, Prompt ou Log.-->

    <h1>ABNT-Rules</h1>
	<form name="formatador" id="form">
		Nome: <input type="text" name="nome" id="nome" placeholder="Digite o nome" required>
		
		
		<input type="button" id="btnFormatar" value="Formatar" name="btFormatar" onclick="formatarNome()">

		<input type="button" id="btnZerar" value="Zerar" name="btnZerar" onclick="zerarCampos()">
	</form>
	<br>
	<p id="paragrafo" name="paragrafo"> </p>

    
<script>
	function formatarNome(){
		let nome = document.forms["formatador"]["nome"].value;
		if (nome == ""){
			alert("CAMPO DE NOME VAZIO")
		}else{
			var nomeSeparado = nome.split(" "); //separou o nome em array
			console.log(nomeSeparado);
			var ultimoNome = nomeSeparado[nomeSeparado.length - 1]; //pega última string da array
			var sobrenomesFinais = [];
			
			for (let i = 1; i<nomeSeparado.length-1; i++){
				if (nomeSeparado[i] == "de" || nomeSeparado[i] == "De" || nomeSeparado[i] == "da" || nomeSeparado[i] == "Da"){

				}else{
					sobrenomesFinais[i] = nomeSeparado[i].substr(0,1);
				}
			}	
			document.getElementById("paragrafo").innerHTML = ultimoNome.toUpperCase()+", "+nomeSeparado[0]+" "+sobrenomesFinais.join(' ');
		}		
	}

	function zerarCampos (){
		document.getElementById("nome").value = null;
		document.getElementById("paragrafo").innerHTML = " ";

	}
	</script>
</body>

</html>
